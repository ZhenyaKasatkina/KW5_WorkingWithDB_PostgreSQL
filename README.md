# KW5_WorkingWithDB_PostgreSQL

Проект по БД

    В рамках проекта осуществляется получены данных о компаниях и вакансиях с сайта hh.ru, 
    спроектированы таблицы в БД PostgreSQL,
    загружаются полученные данные в созданные таблицы,
    предусмотрена возможность подключения к БД для работы с ее данными.

Структура:

1. main.py - модуль для запуска кода (+ содержит список организаций, по вакансиям которых ведется работа в БД)
2. pyproject.toml - файл содержащий данные о коде, в том числе используемые программы/зависимости проекта
3. config.py - содержит функцию config, из которой получаем словарь с данными для подключения к БД 
4. пакет src, включает в себя:

- src/user_function.py - модуль содержит основную функцию user_func (для работы с пользователем)/ 
и дополнительную:  check_range_and_num(проверка данных на число)

- src/hh_api.py - модуль содержит класс "HeadHunterAPI" для получения данных с сайта HH через API-запрос имеет методы:\

    * метод get_employers_data Получает данные о работодателях с сайта HH через API по названию компаний\
    * метод get_vacancies_data Получает вакансии с сайта HH через API (по id работодателя) 
    и возвращает список словарей: работодатель и данные по его вакансиям 
	
- src/create_databases.py - модуль содержит две функции:

	* create_database Создание базы данных и таблиц для сохранения данных о работодателях и вакансиях.
	* save_data_to_database Сохранение данных о работодателях и вакансиях в базу данных.

- src/vacancies.py - модуль содержит класс Vacancies с атрибутами объявлений
    (должность, заработная плата, город, ссылка на вакансию). 
    Класс имеет методы валидации данных (атрибутов)
	
- src/db_manager.py - модуль содержит класс "BManager, который подключатся к БД PostgreSQL.
Класс DBManager использует библиотеку psycopg2 для работы с БД.
имеет следующие методы:

  * get_companies_and_vacancies_count() — получает список всех компаний и количество вакансий у каждой компании.
  * get_all_vacancies() — получает список всех вакансий с указанием названия компании, названия вакансии и зарплаты и ссылки на вакансию.
  * get_avg_salary() — получает среднюю зарплату по вакансиям.
  * get_vacancies_with_higher_salary() — получает список всех вакансий, у которых зарплата выше средней по всем вакансиям.
  * get_vacancies_with_keyword() — получает список всех вакансий, в названии которых содержатся переданные в метод слова, например python.
